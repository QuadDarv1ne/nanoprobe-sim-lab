#!/usr/bin/env python3
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Главный входной скрипт для Лаборатории моделирования нанозонда
Этот скрипт демонстрирует интеграцию всех трех компонентов:
1. Симулятор аппаратного обеспечения СЗМ на C++
2. Анализатор изображений поверхности на Python
3. Наземная станция SSTV на Python/C++
"""

import os
import sys
import argparse
from datetime import datetime

def print_welcome():
    """Отображает приветственное сообщение и обзор проекта"""
    print("=" * 80)
    print("           ЛАБОРАТОРИЯ МОДЕЛИРОВАНИЯ НАНОЗОНДА")
    print("        Nanoprobe Simulation Lab - Main Console")
    print("=" * 80)
    print(f"Время запуска: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print()
    print("Проект включает три взаимосвязанных модуля:")
    print("  1. Симулятор аппаратного обеспечения СЗМ на C++")
    print("  2. Анализатор изображений поверхности на Python")
    print("  3. Наземная станция SSTV на Python/C++")
    print()

def show_menu():
    """Отображает основные опции меню"""
    print("ДОСТУПНЫЕ ОПЕРАЦИИ:")
    print("  1. Запустить симулятор СЗМ (C++)")
    print("  2. Запустить анализатор изображений (Python)")
    print("  3. Запустить наземную станцию SSTV (Python/C++)")
    print("  4. Показать информацию о проекте")
    print("  5. Показать текущую лицензию")
    print("  0. Выход")
    print()

def run_spm_simulator():
    """Запускает симулятор аппаратного обеспечения СЗМ на C++"""
    print("\n--- ЗАПУСК СИМУЛЯТОРА СЗМ ---")
    print("Для запуска симулятора СЗМ выполните следующие команды:")
    print("  cd cpp-spm-hardware-sim")
    print("  mkdir build && cd build")
    print("  cmake .. && make")
    print("  ./spm-simulator")
    print("\nСимулятор позволяет:")
    print("- Моделировать сканирование поверхности зондом")
    print("- Генерировать топографические данные")
    print("- Визуализировать результаты сканирования")
    input("\nНажмите Enter для продолжения...")

def run_surface_analyzer():
    """Запускает анализатор изображений поверхности на Python"""
    print("\n--- ЗАПУСК АНАЛИЗАТОРА ИЗОБРАЖЕНИЙ ---")
    print("Для запуска анализатора изображений выполните следующие команды:")
    print("  cd py-surface-image-analyzer")
    print("  pip install -r requirements.txt")
    print("  python src/main.py")
    print("\nАнализатор позволяет:")
    print("- Загружать и обрабатывать изображения поверхности")
    print("- Применять фильтры для улучшения качества изображения")
    print("- Анализировать шероховатость и дефекты поверхности")
    print("- Визуализировать 3D-модели поверхности")
    input("\nНажмите Enter для продолжения...")

def run_sstv_groundstation():
    """Запускает наземную станцию SSTV на Python/C++"""
    print("\n--- ЗАПУСК НАЗЕМНОЙ СТАНЦИИ SSTV ---")
    print("Для запуска наземной станции SSTV выполните следующие команды:")
    print("  cd py-sstv-groundstation")
    print("  pip install -r requirements.txt")
    print("  python src/main.py")
    print("\nНаземная станция позволяет:")
    print("- Принимать сигналы с реальных спутников")
    print("- Декодировать SSTV-сигналы в изображения")
    print("- Сохранять и анализировать полученные изображения")
    input("\nНажмите Enter для продолжения...")

def show_project_info():
    """Показывает подробную информацию о проекте"""
    print("\n--- ИНФОРМАЦИЯ О ПРОЕКТЕ ---")
    print("Название: Лаборатория моделирования нанозонда")
    print("Описание: Комплекс инструментов для моделирования наноразмерных измерительных систем")
    print("         и космических микроскопических систем.")
    print()
    print("Компоненты проекта:")
    print("  1. Симулятор СЗМ на C++:")
    print("     - Моделирует работу сканирующего зондового микроскопа")
    print("     - Обеспечивает управление зондом и сбор топографических данных")
    print()
    print("  2. Анализатор изображений на Python:")
    print("     - Обрабатывает и анализирует изображения поверхности")
    print("     - Применяет фильтры и визуализирует 3D-модели")
    print()
    print("  3. Наземная станция SSTV на Python/C++:")
    print("     - Принимает и декодирует сигналы со спутников")
    print("     - Работает с реальными космическими данными")
    print()
    print("Цель проекта: Образовательные и исследовательские цели в нанотехнологиях")
    print("               и радионауке.")
    input("\nНажмите Enter для продолжения...")

def show_license():
    """Показывает лицензию проекта"""
    print("\n--- ЛИЦЕНЗИЯ НА ИСПОЛЬЗОВАНИЕ ПРОГРАММНОГО ОБЕСПЕЧЕНИЯ ---")
    try:
        with open('LICENCE', 'r', encoding='utf-8') as f:
            print(f.read())
    except FileNotFoundError:
        print("Файл лицензии не найден.")
    input("\nНажмите Enter для продолжения...")

def main():
    """Главная функция для запуска консоли Лаборатории моделирования нанозонда"""
    print_welcome()
    
    while True:
        show_menu()
        
        try:
            choice = input("Выберите действие (0-5): ").strip()
            
            if choice == '1':
                run_spm_simulator()
            elif choice == '2':
                run_surface_analyzer()
            elif choice == '3':
                run_sstv_groundstation()
            elif choice == '4':
                show_project_info()
            elif choice == '5':
                show_license()
            elif choice == '0':
                print("\nСпасибо за использование Лаборатории моделирования нанозонда!")
                print("До новых встреч!")
                break
            else:
                print("\nНеверный выбор. Пожалуйста, выберите от 0 до 5.")
                
        except KeyboardInterrupt:
            print("\n\nРабота программы прервана пользователем.")
            break
        except Exception as e:
            print(f"\nОшибка: {str(e)}")
            continue

if __name__ == "__main__":
    main()